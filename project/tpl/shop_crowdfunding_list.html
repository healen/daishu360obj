<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<title>贷鼠网-首页</title>
	<!-- <link rel="stylesheet" href="../public/styles/bootstrap3.3.5/bootstrap.min.css" type="text/css"> -->
	<link rel="stylesheet" href="../public/styles/layout.css" type="text/css">

	<link rel="stylesheet" href="../public/styles/pul_crowdfunding_list.css" type="text/css">
	<link rel="stylesheet" href="../public/styles/lib/slick.css" type="text/css">
	<script type="text/javascript" src="../public/scripts/lib/jquery-1.8.2.min.js"></script>
	<script type="text/javascript" src="../public/scripts/lib/jQueryColor.js"></script>

	<script type="text/javascript" src="../public/scripts/lib/jquery.masonry.min.js"></script>
	<script type="text/javascript" src="../public/scripts/lib/jQeasing.js"></script>



</head>
<body>


 
<div class="box">
	<!--读取头部文件开始-->
 	{% inc='header.tpl' %}
 	<!--读取头部文件结束-->
	<div class="container">





		<div class="screen">
			<div class="inwarp">
				<div class="where">
					<span class="title">行业筛选：</span>
					<a href="javascript:void(0)" class="on">全部</a>
					<a href="javascript:void(0)">科技</a>
					<a href="javascript:void(0)">农业</a>
					<a href="javascript:void(0)">出版</a>
					<a href="javascript:void(0)">娱乐</a>
					<a href="javascript:void(0)">艺术</a>
					<a href="javascript:void(0)">商铺</a>
					<a href="javascript:void(0)">房产</a>
					<a href="javascript:void(0)">金融</a>

				</div>

				<div class="where">
					<span class="title">项目进度：</span>
					<a href="javascript:void(0)"  class="on">全部</a>
					<a href="javascript:void(0)">众筹中</a>
					<a href="javascript:void(0)">已成功</a>
					<a href="javascript:void(0)">即将开始</a>
					<a href="javascript:void(0)">即将结束</a>
				

				</div>


				<div class="where">
					<span class="title">项目排序：</span>
					<a href="javascript:void(0)" class="on">默认</a>
					<a href="javascript:void(0)" class="sort desc"><span>最新上线</span><i></i></a>
					<a href="javascript:void(0)" class="sort asc"><span>目标金额</span><i></i></a>
					<!-- <a href="javascript:void(0)" class="sort desc"><span>支持人数</span><i></i></a> -->
					<a href="javascript:void(0)" class="sort desc"><span>筹资额</span><i></i></a>
					<div class="inputbox">

						<input type="text" placeholder="￥">
						<span>-</span>
					
						<input type="text" placeholder="￥">

						<input type="button" value="确定">
					</div>
				</div>

				
				
			</div>
			
		</div>








		<div class="inwarp">

			<div class="image-project-list">
				<ul>

					<li>
						<a class="link" href="crowdfunded_detail_product.html">
							<img src="../public/img/003.png" alt="">
							<div class="content">
								<div class="inc">
									<h2>众筹项目标题</h2>
									<div class="tag-group">
										<span href="javascript:void(0)">标签1</span>
										<span href="javascript:void(0)">标签bf1</span>
										<span href="javascript:void(0)">标签fds1</span>
									</div>
									<div class="decribe">
										众筹项目内容简介，这是一个我们都这是都是一个我们都都是都都们都都们内容简介啊这里都是内容简介…
										
									</div>


									<div class="progress">
										<div class="bar" style="width:40%"></div>
									</div>

									<div class="info">
										<div>
											<div>￥1588.00元</div>
											<div class="title">已筹款</div>
										</div>
										<div>
											<div>150000人</div>
											<div class="title">支持数</div>
										</div>
										<div>
											<div>58%</div>
											<div class="title">众筹进度</div>
										</div>
										
									</div>
								</div>
								
							</div>
						</a>
					</li>
					{% inc='project_list.tpl' %}
					<li>
						<a class="link" href="crowdfunded_detail_product.html">
							<img src="../public/img/4.png" alt="">
							<div class="content">
								<div class="inc">
									<h2>众筹项目标题</h2>
									<div class="tag-group">
										<span href="javascript:void(0)">标签1</span>
										<span href="javascript:void(0)">标签bf1</span>
										<span href="javascript:void(0)">标签fds1</span>
									</div>
									<div class="decribe">
										众筹项目内容简介，这是一个我们都这是都是一个我们都都是都都们都都们内容简介啊这里都是内容简介…
									</div>


									<div class="progress">
										<div class="bar" style="width:40%"></div>
									</div>

									<div class="info">
										<div>
											<div>￥1588.00元</div>
											<div class="title">已筹款</div>
										</div>
										<div>
											<div>150000人</div>
											<div class="title">支持数</div>
										</div>
										<div>
											<div>58%</div>
											<div class="title">众筹进度</div>
										</div>
										
									</div>
								</div>
								
							</div>
						</a>
					</li>
					{% inc='project_list.tpl' %}
					<li>
						<a class="link" href="crowdfunded_detail_product.html">
							<img src="../public/img/005.png" alt="">
							<div class="content">
								<div class="inc">
									<h2>众筹项目标题</h2>
									<div class="tag-group">
										<span href="javascript:void(0)">标签1</span>
										<span href="javascript:void(0)">标签bf1</span>
										<span href="javascript:void(0)">标签fds1</span>
									</div>
									<div class="decribe">
										众筹项目内容简介，这是一个我们都这是都是一个我们都都是都都们都都们内容简介啊这里都是内容简介…
									</div>


									<div class="progress">
										<div class="bar" style="width:40%"></div>
									</div>

									<div class="info">
										<div>
											<div>￥1588.00元</div>
											<div class="title">已筹款</div>
										</div>
										<div>
											<div>150000人</div>
											<div class="title">支持数</div>
										</div>
										<div>
											<div>58%</div>
											<div class="title">众筹进度</div>
										</div>
										
									</div>
								</div>
								
							</div>
						</a>
					</li>
					{% inc='project_list.tpl' %}



					<li>
						<a class="link" href="crowdfunded_detail_product.html">
							<img src="../public/img/007.png" alt="">
							<div class="content">
								<div class="inc">
									<h2>众筹项目标题</h2>
									<div class="tag-group">
										<span href="javascript:void(0)">标签1</span>
										<span href="javascript:void(0)">标签bf1</span>
										<span href="javascript:void(0)">标签fds1</span>
									</div>
									<div class="decribe">
										众筹项目内容简介，这是一个我们都这是都是一个我们都都是都都们都都们内容简介啊这里都是内容简介…
									</div>


									<div class="progress">
										<div class="bar" style="width:40%"></div>
									</div>

									<div class="info">
										<div>
											<div>￥1588.00元</div>
											<div class="title">已筹款</div>
										</div>
										<div>
											<div>150000人</div>
											<div class="title">支持数</div>
										</div>
										<div>
											<div>58%</div>
											<div class="title">众筹进度</div>
										</div>
										
									</div>
								</div>
								
							</div>
						</a>
					</li>
					{% inc='project_list.tpl' %}

					<li>
						<a class="link" href="crowdfunded_detail_product.html">
							<img src="../public/img/013.png" alt="">
							<div class="content">
								<div class="inc">
									<h2>众筹项目标题</h2>
									<div class="tag-group">
										<span href="javascript:void(0)">标签1</span>
										<span href="javascript:void(0)">标签bf1</span>
										<span href="javascript:void(0)">标签fds1</span>
									</div>
									<div class="decribe">
										众筹项目内容简介，这是一个我们都这是都是一个我们都都是都都们都都们内容简介啊这里都是内容简介…
									
									</div>


									<div class="progress">
										<div class="bar" style="width:40%"></div>
									</div>

									<div class="info">
										<div>
											<div>￥1588.00元</div>
											<div class="title">已筹款</div>
										</div>
										<div>
											<div>150000人</div>
											<div class="title">支持数</div>
										</div>
										<div>
											<div>58%</div>
											<div class="title">众筹进度</div>
										</div>
										
									</div>
								</div>
								
							</div>
						</a>
					</li>
					
					
					
					{% inc='project_list.tpl' %}

					<li>
						<a class="link" href="crowdfunded_detail_product.html">
							<img src="../public/img/4.png" alt="">
							<div class="content">
								<div class="inc">
									<h2>众筹项目标题</h2>
									<div class="tag-group">
										<span href="javascript:void(0)">标签1</span>
										<span href="javascript:void(0)">标签bf1</span>
										<span href="javascript:void(0)">标签fds1</span>
									</div>
									<div class="decribe">
										众筹项目内容简介，这是一个我们都这是都是一个我们都都是都都们都都们内容简介啊这里都是内容简介…
									</div>


									<div class="progress">
										<div class="bar" style="width:40%"></div>
									</div>

									<div class="info">
										<div>
											<div>￥1588.00元</div>
											<div class="title">已筹款</div>
										</div>
										<div>
											<div>150000人</div>
											<div class="title">支持数</div>
										</div>
										<div>
											<div>58%</div>
											<div class="title">众筹进度</div>
										</div>
										
									</div>
								</div>
								
							</div>
						</a>
					</li>
					{% inc='project_list.tpl' %}
					
				</ul>
			</div>


			<div id="imloading" class="image-login" style="">
				正在加载，您可以按照分类进行筛选
			</div>




			
			
		</div>




				


	
	


	</div>
	<!--读取尾部文件开始-->
	{% inc='footer.tpl' %}
	<!--读取尾部文件结束-->
</div>






<script type="text/javascript" src="../public/scripts/public.js"></script>
<script type="text/javascript" src="../public/scripts/swipe.js"></script>
<script src="../public/scripts/lib/chaffle.min.js"></script> 
<script src="../public/scripts/lib/slick.min.js"></script> 
<script type="text/javascript">

var container = $('.image-project-list ul');
var loading=$('#imloading');
// 初始化loading状态
loading.data("on",true);

function tores(){
	var tmpWid=$(window).width();

	tmpWid=1240;

	$('.image-project-list').width(tmpWid);
}
tores();
$(window).resize(function(){
	tores();
});
container.imagesLoaded(function(){
  container.masonry({
	columnWidth: 304,
	itemSelector : 'li',
	isFitWidth: true,//是否根据浏览器窗口大小自动适应默认false
	isAnimated: true,//是否采用jquery动画进行重拍版
	isRTL:false,//设置布局的排列方式，即：定位砖块时，是从左向右排列还是从右向左排列。默认值为false，即从左向右
	isResizable: true,//是否自动布局默认true
	animationOptions: {
		duration: 800,
		easing: 'easeInOutBack',//如果你引用了jQeasing这里就可以添加对应的动态动画效果，如果没引用删除这行，默认是匀速变化
		queue: false//是否队列，从一点填充瀑布流
	}
  });
});

var sqlJson=[
	{
		'url':"javascript:void(0)",
		'title':'瀑布流其实就是几个函数的事！',
		'tags':['标签1','标签2','标签3'],


		'describe':'瀑布流就那个事儿，几个函数就搞定了',
		'src':'../public/img/003.png',
		'corw':1500.00,
		'support':5000,
		'ratio':0.56
	},
	{
		'url':"javascript:void(0)",
		'title':'葫芦娃众筹',
		'tags':['标签1','标签2','标签3'],


		'describe':'瀑布流就那个事儿，几个函数就搞定了',
		'src':'../public/img/007.png',
		'corw':1500.00,
		'support':5000,
		'ratio':0.56
	},
	{
		'url':"javascript:void(0)",
		'title':'葫芦娃众筹',
		'tags':['标签1','标签2','标签3'],


		'describe':'瀑布流就那个事儿，几个函数就搞定了',
		'src':'../public/img/banner/2.png',
		'corw':1500.00,
		'support':5000,
		'ratio':0.56
	},
	{
		'url':"javascript:void(0)",
		'title':'葫芦娃众筹',
		'tags':['标签1','标签2','标签3'],


		'describe':'瀑布流就那个事儿，几个函数就搞定了',
		'src':'../public/img/banner/banner1.png',
		'corw':1500.00,
		'support':5000,
		'ratio':0.56
	}
	

];
			/*本应该通过ajax从后台请求过来类似sqljson的数据然后，便利，进行填充，这里我们用sqlJson来模拟一下数据*/

$(window).scroll(function(){
	if(!loading.data("on")) return;
	// 计算所有瀑布流块中距离顶部最大，进而在滚动条滚动时，来进行ajax请求，方法很多这里只列举最简单一种，最易理解一种
	var itemNum=$('.image-project-list').find('li').length;
	var itemArr=[];
	itemArr[0]=$('.image-project-list').find('li').eq(itemNum-1).offset().top+$('.image-project-list').find('li').eq(itemNum-1)[0].offsetHeight;
	itemArr[1]=$('.image-project-list').find('li').eq(itemNum-2).offset().top+$('.image-project-list').find('li').eq(itemNum-1)[0].offsetHeight;
	itemArr[2]=$('.image-project-list').find('li').eq(itemNum-3).offset().top+$('.image-project-list').find('li').eq(itemNum-1)[0].offsetHeight;
	var maxTop=Math.max.apply(null,itemArr);
	if(maxTop<$(window).height()+$(document).scrollTop()){
		//加载更多数据
		loading.data("on",false).fadeIn(800);
		(function(sqlJson){
			/*这里会根据后台返回的数据来判断是否你进行分页或者数据加载完毕这里假设大于30就不在加载数据*/
			if(itemNum>30){
				loading.text('就这么多项目了，美好总是值得期待');
			}else{
				var html="";
				for(var i in sqlJson){

					html+='<li><a class="link" href="'+sqlJson[i].url+'"><img src="'+sqlJson[i].src+'" alt="">';
					html+='<div class="content"><div class="inc"><h2>'+sqlJson[i].title+'</h2>';
					html+='<div class="tag-group"><span href="javascript:void(0)">'+sqlJson[i].tags[0]+'</span><span href="javascript:void(0)">'+sqlJson[i].tags[1]+'</span><span href="javascript:void(0)">'+sqlJson[i].tags[2]+'</span></div>';
					html+='<div class="decribe">'+sqlJson[i].describe+'</div><div class="progress"><div class="bar" style="width:40%"></div></div>';
					html+='<div class="info"><div><div>￥'+sqlJson[i].corw+'元</div><div class="title">已筹款</div></div><div><div>'+sqlJson[i].support+'人</div><div class="title">支持数</div></div><div><div>'+parseInt(sqlJson[i].ratio*100)+'%</div><div class="title">众筹进度</div>';
					html+='</div></div></div></div></a></li>';
				}
				/*模拟ajax请求数据时延时800毫秒*/
				var time=setTimeout(function(){
					$(html).find('img').each(function(index){
						loadImage($(this).attr('src'));
					})
					var $newElems = $(html).css({ opacity: 0}).appendTo(container);
					$newElems.imagesLoaded(function(){
						$newElems.animate({ opacity: 1},800);
						container.masonry( 'appended', $newElems,true);
						loading.data("on",true).fadeOut();
						clearTimeout(time);
					});
				},800)
			}
		})(sqlJson);
	}
});

function loadImage(url) {
	 var img = new Image(); 
	 //创建一个Image对象，实现图片的预下载
	  img.src = url;
	  if (img.complete) {
		 return img.src;
	  }
	  img.onload = function () {
		return img.src;
	  };
 };
 loadImage('../public/img/4.png');
/*item hover效果*/
var rbgB=['#71D3F5','#F0C179','#F28386','#8BD38B'];
$('#waterfull').on('mouseover','.item',function(){
	var random=Math.floor(Math.random() * 4);
	$(this).stop(true).animate({'backgroundColor':rbgB[random]},1000);
});
$('#waterfull').on('mouseout','.item',function(){
	$(this).stop(true).animate({'backgroundColor':'#fff'},1000);
});




/**
 *
 * 筛选条件JS
 */

$(".where a").on("click",function(){
	$(this).addClass("on").siblings().removeClass("on")
})

$(".where .sort").on("click",function(){
	if(!$(this).hasClass("asc")){
		$(this).addClass("asc").removeClass("desc");
	}else{
		$(this).removeClass("asc").addClass("desc");
	}
})








	
</script>

</body>
</html>